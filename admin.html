<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุญุฉ ุงูุฅุฏุงุฑุฉ - ูุนุฑุถ ุงูุฑุณููุงุช</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="main-header">
        <h1>๐ฉโ๐ผ ููุญุฉ ุงูุฅุฏุงุฑุฉ</h1>
        <div class="subtitle">ุฅุฏุงุฑุฉ ุทูุจุงุช ุงูุฑุณู ูุงูุทุงูุจุงุช</div>
    </header>

    <div class="container">
        <div class="nav-container">
            <div class="navigation">
                <a href="index.html" class="nav-btn">ุงูุฑุฆูุณูุฉ</a>
                <a href="register.html" class="nav-btn">ุฅูุดุงุก ุญุณุงุจ</a>
                <a href="gallery.html" class="nav-btn">ุงููุนุฑุถ</a>
                <a href="admin.html" class="nav-btn active">ููุญุฉ ุงูุฅุฏุงุฑุฉ</a>
            </div>
        </div>

        <div id="messageContainer"></div>

        <!-- ุชุณุฌูู ุงูุฏุฎูู -->
        <div id="loginSection" class="card login-container">
            <h2 style="text-align: center; color: var(--primary); margin-bottom: 2rem;">ุฏุฎูู ุงูุฅุฏุงุฑุฉ</h2>
            <p style="text-align: center; color: #666; margin-bottom: 2rem;">
                ูุฐู ุงูุตูุญุฉ ุฎุงุตุฉ ุจู (ุตุงุญุจุฉ ุงููุดุฑูุน) ุนุดุงู ุฃุฏุงุฑ ุงูุทูุจุงุช ูุงูุฑุณููุงุช
            </p>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">ุงุณู ุงููุณุชุฎุฏู:</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="password">ูููุฉ ุงููุฑูุฑ:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="btn" style="width: 100%;">ุฏุฎูู ุงูุฅุฏุงุฑุฉ</button>
            </form>
        </div>

        <!-- ููุญุฉ ุงูุฅุฏุงุฑุฉ -->
        <div id="adminPanel" class="card" style="display: none;">
            <h2 style="text-align: center; color: var(--primary); margin-bottom: 2rem;">ููุญุฉ ุงูุฅุฏุงุฑุฉ - ูุดุฑูุน ุงูุชุฎุฑุฌ</h2>
            
            <div class="stats-grid" id="statsGrid">
                <!-- ุงูุฅุญุตุงุฆูุงุช ุชุธูุฑ ููุง -->
            </div>

            <!-- ูุณู ูุฒุงููุฉ ุงูุจูุงูุงุช -->
            <div class="card" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);">
                <h3 style="color: var(--primary); margin-bottom: 1.5rem; text-align: center;">๐ ูุฒุงููุฉ ุงูุจูุงูุงุช ุจูู ุงูุฃุฌูุฒุฉ</h3>
                
                <div class="dashboard-grid">
                    <div>
                        <h4 style="color: var(--accent); margin-bottom: 1rem;">๐ค ุชุตุฏูุฑ ุงูุจูุงูุงุช</h4>
                        <div class="form-group">
                            <label>ุงูุจูุงูุงุช ุงูุญุงููุฉ:</label>
                            <textarea id="exportData" rows="4" readonly style="background: #fff; width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #e0e0e0; font-family: monospace;"></textarea>
                        </div>
                        <button onclick="exportData()" class="btn" style="width: 100%;">
                            ูุณุฎ ุงูุจูุงูุงุช ๐
                        </button>
                    </div>
                    
                    <div>
                        <h4 style="color: var(--accent); margin-bottom: 1rem;">๐ฅ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช</h4>
                        <div class="form-group">
                            <label>ุงูุตู ุงูุจูุงูุงุช ููุง:</label>
                            <textarea id="importData" rows="4" placeholder="ุงูุตู ุงูุจูุงูุงุช ุงููุณุชูุฑุฏุฉ ููุง..." style="width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #e0e0e0; font-family: monospace;"></textarea>
                        </div>
                        <button onclick="importData()" class="btn btn-secondary" style="width: 100%;">
                            ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ๐
                        </button>
                    </div>
                </div>

                <div style="margin-top: 1.5rem; padding: 1rem; background: white; border-radius: 10px; border-right: 4px solid var(--secondary);">
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">๐ก ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู:</h4>
                    <ol style="color: #555; line-height: 1.6; padding-right: 1rem;">
                        <li>ูู <strong>ุงูุฌูุงุฒ ุงูุฃูู</strong>: ุงุถุบุทู "ูุณุฎ ุงูุจูุงูุงุช"</li>
                        <li>ุงูุณุฎู ุงููุต ูู ุงููุฑุจุน ุงูุฃุนูู</li>
                        <li>ุฃุฑุณูู ุงููุต ูู<strong>ุฌูุงุฒ ุงูุซุงูู</strong></li>
                        <li>ูู <strong>ุงูุฌูุงุฒ ุงูุซุงูู</strong>: ุงูุตูู ุงููุต ูู ุงููุฑุจุน ุงูุฃุณูู</li>
                        <li>ุงุถุบุทู "ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช"</li>
                    </ol>
                </div>
            </div>
            
            <div class="card">
                <h3 style="color: var(--primary); margin-bottom: 1.5rem;">ูุงุฆูุฉ ุงูุทุงูุจุงุช ูุงูุทูุจุงุช</h3>
                <div style="overflow-x: auto;">
                    <table class="admin-table" id="studentsTable">
                        <thead>
                            <tr>
                                <th>ุงูุงุณู</th>
                                <th>ุฑูู ุงูุฌูุงู</th>
                                <th>ุทูุจ ุฑุณูุฉ</th>
                                <th>ุงููุนูููุงุช</th>
                                <th>ุญุงูุฉ ุงูุฑุณูุฉ</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <!-- ุงูุจูุงูุงุช ุชุธูุฑ ููุง -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-secondary" onclick="logout()">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        const ADMIN_USERNAME = 'admin';
        const ADMIN_PASSWORD = 'admin123';

        function checkAuth() {
            return localStorage.getItem('adminLoggedIn') === 'true';
        }

        function login(username, password) {
            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                localStorage.setItem('adminLoggedIn', 'true');
                showAdminPanel();
                return true;
            }
            return false;
        }

        function logout() {
            localStorage.removeItem('adminLoggedIn');
            showLoginForm();
        }

        function showLoginForm() {
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
        }

        function showAdminPanel() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            renderAdminPanel();
        }

        function renderAdminPanel() {
            const students = galleryApp.getAllStudents();
            
            // ุงูุฅุญุตุงุฆูุงุช
            const totalStudents = students.length;
            const drawingRequests = students.filter(s => s.wants_drawing).length;
            const completedInfo = students.filter(s => s.info_completed).length;
            const completedDrawings = students.filter(s => s.drawing_completed).length;

            document.getElementById('statsGrid').innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${totalStudents}</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงููุณุฌูุงุช</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${drawingRequests}</div>
                    <div class="stat-label">ุทูุจุงุช ุงูุฑุณู</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${completedInfo}</div>
                    <div class="stat-label">ููุชููุฉ ุงููุนูููุงุช</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${completedDrawings}</div>
                    <div class="stat-label">ุงูุฑุณููุงุช ุงูููุชููุฉ</div>
                </div>
            `;

            // ุฌุฏูู ุงูุทุงูุจุงุช
            document.getElementById('studentsTableBody').innerHTML = students.map(student => `
                <tr>
                    <td>${student.name}</td>
                    <td>${student.phone || 'ุบูุฑ ูุญุฏุฏ'}</td>
                    <td>${student.wants_drawing ? 'โ ูุนู' : 'โ ูุง'}</td>
                    <td>
                        <span class="${student.info_completed ? 'status-complete' : 'status-incomplete'}">
                            ${student.info_completed ? 'ููุชููุฉ' : 'ุบูุฑ ููุชููุฉ'}
                        </span>
                    </td>
                    <td>
                        <span class="${student.drawing_completed ? 'status-complete' : 'status-incomplete'}">
                            ${student.drawing_completed ? 'ููุชููุฉ' : 'ููุฏ ุงูุงูุชุธุงุฑ'}
                        </span>
                    </td>
                    <td>
                        <button class="btn" style="padding: 0.5rem 1rem; font-size: 0.9rem;" 
                                onclick="editStudent(${student.id})">ุนุฑุถ/ุชุนุฏูู</button>
                    </td>
                </tr>
            `).join('');

            // ุชุนุจุฆุฉ ุจูุงูุงุช ุงูุชุตุฏูุฑ
            document.getElementById('exportData').value = galleryApp.exportData();
        }

        function editStudent(studentId) {
            window.location.href = `admin-student.html?id=${studentId}`;
        }

        // ุชุตุฏูุฑ ุงูุจูุงูุงุช
        function exportData() {
            const exportTextarea = document.getElementById('exportData');
            exportTextarea.select();
            document.execCommand('copy');
            showMessage('โ ุชู ูุณุฎ ุงูุจูุงูุงุช! ุงูุตูููุง ูู ุงูุฌูุงุฒ ุงูุขุฎุฑ', 'success');
        }

        // ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช
        function importData() {
            const importData = document.getElementById('importData').value;
            if (!importData.trim()) {
                showMessage('โ ุงูุฑุฌุงุก ูุตู ุงูุจูุงูุงุช ุฃููุงู', 'error');
                return;
            }

            if (galleryApp.importData(importData)) {
                showMessage('โ ุชู ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ุจูุฌุงุญ!', 'success');
                renderAdminPanel(); // ุฅุนุงุฏุฉ ุชุญููู ุงูุฌุฏูู
            } else {
                showMessage('โ ุฎุทุฃ ูู ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช - ุชุฃูุฏู ูู ุตุญุฉ ุงููุต', 'error');
            }
        }

        // ุชุณุฌูู ุงูุฏุฎูู
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (login(username, password)) {
                showMessage('ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!', 'success');
            } else {
                showMessage('ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ', 'error');
            }
        });

        // ุงูุชุญูู ูู ุงูุชุณุฌูู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        window.addEventListener('load', function() {
            if (checkAuth()) {
                showAdminPanel();
            } else {
                showLoginForm();
            }
        });
    </script>
</body>
</html>
